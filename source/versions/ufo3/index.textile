<div class="section">

h1. UFO 3 (draft)

The UFO 3 specification is currently in development. In no way is this a final draft and everything is subject to change. "Please contact the spec maintainers if you have any comments about this draft.":../team.html

<div class="discussionNote">
Points of contention in this document have notes like this explaining the differing points of view. These are ongoing discussions that will be resolved before the specification is final.
</div>

<div class="implementationNote">
We have found it helpful to think about the implementation of this spec in our own code, notably ufoLib, glifLib, RoboFab and defcon. Throughout this document, notes about how we think we can/will implement things are highlighted in sections like this. These are not and will not be part of the official specification. They are here purely to help keep the specification grounded in reality. These will not be included in the final specification.
</div>

<div class="editorsNote">
Notes to the editor are highlighted like this. Please pardon our dust.
</div>

A UFO is a directory representing font data with one or more glyph layers.

h3. Terminology

The terms "must", "must not", "required", "shall", "shall not", "should", "should not", "recommended", "may", and "optional" used throughout this specification conform to "RFC 2119":http://www.ietf.org/rfc/rfc2119.txt.

The term "authoring tool" is used throughout this specification to refer to tools that read and write UFOs. Authoring tools may take many forms:

# A font editor that uses UFO as its native file format.
# A tool that allows for importing data from or exporting data to a UFO.
# A programming library for reading or writing UFO data.
# A script for modifying a UFO.

This list is not exclusive.

h3. File Structure

UFO 3 follows this file structure:

<ul class="filediagram">
  <li class="filediagramDirectory"><span class="filediagramArrow">&#9660;</span> &#42;.ufo</li>
  <ul class="filediagramNested">
    <li class="filediagramFile">metainfo.plist</li>
    <li class="filediagramFile">fontinfo.plist</li>
    <li class="filediagramFile">groups.plist</li>
    <li class="filediagramFile">kerning.plist</li>
    <li class="filediagramFile">features.plist</li>
    <li class="filediagramFile">lib.plist</li>
    <li class="filediagramFile">layercontents.plist</li>
    <li class="filediagramDirectory"><span class="filediagramArrow">&#9660;</span> glyphs*</li>
    <ul class="filediagramNested">
      <li class="filediagramFile">contents.plist</li>
      <li class="filediagramFile">layerinfo.plist</li>
      <li class="filediagramFile">&#42;.glif</li>
    </ul>
    <li class="filediagramDirectory"><span class="filediagramArrow">&#9660;</span> images</li>
    <ul class="filediagramNested">
      <li class="filediagramFile">&#42;.png</li>
    </ul>
    <li class="filediagramDirectory"><span class="filediagramArrow">&#9654;</span> data</li>
  </ul>
</ul>

Each of the files and directories have unique meanings, purposes and data structures:

| "metainfo.plist":metainfo.html                        | Format version, creator, etc. |
| "fontinfo.plist":fontinfo.html                        | Various font info data. |
| "groups.plist":groups.html                            | Glyph group definitions. |
| "kerning.plist":kerning.html                          | Kerning data. |
| "features.fea":features.html                          | OpenType feature definitions. |
| "lib.plist":lib.html                                  | Arbitrary custom data. |
| "layercontents.plist":layercontents.html              | Glyphs directory name to layer name mapping. |
| "glyphs*":glyphs.html                                 | A directory containing a glyph set representing a "layer":#glyphlayers. |
| glyphs*/"contents.plist":glyphs.html#contents.plist   | File name to glyph name mapping. |
| glyphs*/"layerinfo.plist":glyphs.html#layerinfo.plist | Information about the layer. |
| glyphs*/"*.glif":glif.html                            | A glyph definition. |
| "images":images.html                                  | A directory containing images referenced by glyphs. |
| "data":data.html                                      | Arbitrary custom data in a quantity or structure that can't be stored in lib.plist. |

h3(#glyphlayers). Glyph Layers

The UFO supports layered glyphs. These layers can be used for anything--the common _main+background_ drawing environment, multi-layered fonts, glyph revision history and so on. The layering structure is designed to be conceptually unrestricted.

Layers are implemented with a series of glyph sets within the UFO. Each glyph set represents one layer for all glyphs in the font. Each glyph set is stored in its own _glyphs_ directory. There is one required glyph set that represents the primary outline source of the glyph. This glyph set should be stored in the _glyphs_ directory. Additional layers are stored in other directories as defined in the "layercontents.plist":layercontents.html documentation.

<div class="discussionNote">
Should there be a requirement that all glyphs with the same name have the same Unicode value? Conflicting values would cause confusion when trying to build a character to glyph name mapping.
</div>

</div>


<div class="section">

h1. Changes from UFO 2

h3. metainfo.plist

The _formatVersion_ was bumped to 3.


h3. fontinfo.plist

Support for specific name id, platform, platform encoding and language name table entries was added.

Support for WOFF metadata was added.

Two attributes for identifying kerning groups were added.


h3. groups.plist

Behavior with regard to kerning groups was defined.


h3. kerning.plist

Added information about writing direction.

Information about the new group naming attributes was added.

Added extensive information about kerning pair types. The information is applicable to UFO 1 and UFO 2, but it was not written as a formal part of the spec.


h3. layercontents.plist

This is a new file.


h3. glyphs

More than one glyphs directory is allowed. Each directory is a layer.


h3. glyphs/layerinfo.plist

This is a new file.


h3. glyphs/GLIF

The version number was increased to 2.

h4. Component

A name attribute was added.

A new rule explaining how components relate to layers was added.

h4. Contour

A name attribute was added.

h4. Image

A new image element was added.

h4. Guideline

A new guideline element was added.

h4. Link

A new link element was added.

h4. Pointref

A new pointref element was added.


h3. images

The images directory was added.


h3. data

The data directory was added.

</div>
